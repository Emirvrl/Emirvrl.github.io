<!DOCTYPE html>
<html>
<head>
    <title>NOBLE GAMES - Hafıza Oyunu</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #87CEEB;
            margin: 0;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .memory-game {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            max-width: 800px;
            margin: 20px;
            perspective: 1000px;
        }

        .card {
            width: 100px;
            height: 120px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.5s;
            cursor: pointer;
        }

        .card.flip {
            transform: rotateY(180deg);
        }

        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            padding: 10px;
            backface-visibility: hidden;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-sizing: border-box;
            font-weight: bold;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .card-front {
            background: linear-gradient(135deg, #2C3E50, #3498db);
            color: white;
            transform: rotateY(180deg);
            font-size: 16px;
            text-align: center;
        }

        .card-back {
            background: #34495E;
            color: white;
            font-size: 24px;
        }

        .game-stats {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 10px;
            font-size: 18px;
            z-index: 100;
        }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background-color: #f00;
            position: absolute;
            animation: confetti-fall 3s linear forwards;
        }

        @keyframes confetti-fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
            }
        }

        .record-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            z-index: 1000;
            display: none;
            box-shadow: 0 0 20px rgba(0,0,0,0.2);
        }

        #result {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            display: none;
        }
    </style>
</head>
<body>
    <div class="game-stats">
        Süre: <span id="timer">60</span><br>
        En İyi Süre: <span id="best-time">-</span>
    </div>
    <div class="memory-game"></div>
    <div id="result"></div>
    <div class="record-message" id="record-message"></div>

    <script>
        const allNames = [
            'Ali', 'Bahri', 'Şafak', 'Hamza', 
            'Ege', 'İmran', 'Burak', 'Ercü', 
            'Emir', 'Ömer', 'Çaça'
        ];

        let hasFlippedCard = false;
        let lockBoard = false;
        let firstCard, secondCard;
        let matches = 0;
        let timeLeft = 60;
        let bestTime = localStorage.getItem('memoryGameBestTime') || null;
        let gameStarted = false;
        let timer;

        function selectRandomNames() {
            let shuffled = [...allNames].sort(() => 0.5 - Math.random());
            return shuffled.slice(0, 6);
        }

        function createCards() {
            const gameContainer = document.querySelector('.memory-game');
            gameContainer.innerHTML = ''; // Önceki kartları temizle
            const selectedNames = selectRandomNames();
            const cards = [];
            
            selectedNames.forEach(name => {
                for (let i = 0; i < 2; i++) {
                    const card = createCard(name);
                    cards.push(card);
                }
            });

            cards.sort(() => Math.random() - 0.5);
            cards.forEach(card => gameContainer.appendChild(card));
        }

        function createCard(name) {
            const card = document.createElement('div');
            card.className = 'card';
            
            const front = document.createElement('div');
            front.className = 'card-front';
            front.textContent = name;

            const back = document.createElement('div');
            back.className = 'card-back';
            back.textContent = '?';

            card.appendChild(front);
            card.appendChild(back);
            
            card.addEventListener('click', flipCard);
            card.dataset.name = name;
            
            return card;
        }

        function flipCard() {
            if (lockBoard) return;
            if (this === firstCard) return;

            if (!gameStarted) {
                startTimer();
                gameStarted = true;
            }

            this.classList.add('flip');

            if (!hasFlippedCard) {
                hasFlippedCard = true;
                firstCard = this;
                return;
            }

            secondCard = this;
            checkForMatch();
        }

        function checkForMatch() {
            const isMatch = firstCard.dataset.name === secondCard.dataset.name;
            isMatch ? disableCards() : unflipCards();
        }

        function disableCards() {
            firstCard.removeEventListener('click', flipCard);
            secondCard.removeEventListener('click', flipCard);
            matches++;
            
            if (matches === 6) {
                showResult(true);
            }
            
            resetBoard();
        }

        function unflipCards() {
            lockBoard = true;

            setTimeout(() => {
                firstCard.classList.remove('flip');
                secondCard.classList.remove('flip');
                resetBoard();
            }, 1000);
        }

        function resetBoard() {
            [hasFlippedCard, lockBoard] = [false, false];
            [firstCard, secondCard] = [null, null];
        }

        function startTimer() {
            updateBestTimeDisplay();
            timer = setInterval(() => {
                timeLeft--;
                document.getElementById('timer').textContent = timeLeft;
                
                if (timeLeft === 0) {
                    clearInterval(timer);
                    showResult(false);
                }
            }, 1000);
        }

        function updateBestTimeDisplay() {
            const bestTimeDisplay = document.getElementById('best-time');
            bestTimeDisplay.textContent = bestTime ? `${bestTime} saniye` : '-';
        }

        function showResult(won) {
            clearInterval(timer);
            const resultDiv = document.getElementById('result');
            resultDiv.style.display = 'block';
            
            if (won) {
                const timeSpent = 60 - timeLeft;
                resultDiv.textContent = `Tebrikler! ${timeSpent} saniyede tamamladınız!`;
                
                if (!bestTime || timeSpent < bestTime) {
                    const isFirstGame = !bestTime;
                    bestTime = timeSpent;
                    localStorage.setItem('memoryGameBestTime', timeSpent);
                    
                    if (isFirstGame) {
                        showRecordMessage(`İlk oyununuz! Rekorunuz: ${timeSpent} saniye`);
                    } else {
                        showRecordMessage(`Yeni Rekor! Eski rekorunuzu geçtiniz!`);
                        createConfetti();
                    }
                }
                updateBestTimeDisplay();
            } else {
                resultDiv.textContent = 'Süre Doldu! Tekrar Deneyin!';
            }
        }

        function showRecordMessage(message) {
            const recordMessage = document.getElementById('record-message');
            recordMessage.textContent = message;
            recordMessage.style.display = 'block';
            
            setTimeout(() => {
                recordMessage.style.display = 'none';
            }, 3000);
        }

        function createConfetti() {
            for(let i = 0; i < 100; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 50%)`;
                confetti.style.animationDelay = Math.random() * 3 + 's';
                document.body.appendChild(confetti);
                
                setTimeout(() => confetti.remove(), 3000);
            }
        }

        function resetGame() {
            timeLeft = 60;
            document.getElementById('timer').textContent = timeLeft;
            matches = 0;
            gameStarted = false;
            if (timer) clearInterval(timer);
            
            const resultDiv = document.getElementById('result');
            resultDiv.style.display = 'none';
            
            createCards();
        }

        // Oyunu başlat
        createCards();
        updateBestTimeDisplay();

        // Sayfa yenilendiğinde oyunu sıfırla
        window.onload = resetGame;
    </script>
</body>
</html>